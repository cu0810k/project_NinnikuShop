"use strict";(self["webpackChunkweek8_0626"]=self["webpackChunkweek8_0626"]||[]).push([[598],{7418:function(t,a){a["Z"]={data(){return{wishProduct:JSON.parse(localStorage.getItem("wishProduct"))||[]}},methods:{addToCart(t,a=1){const i="https://vue3-course-api.hexschool.io/v2",s="vue_cu",e={data:{product_id:t,qty:a}};this.isLoading=!0,this.$http.post(`${i}/api/${s}/cart`,e).then((t=>{this.isLoading=!1,this.$mitt.emit("update-count")})).catch((t=>{console.dir(t.response.data.message)}))}}}},9369:function(t,a,i){i.r(a),i.d(a,{default:function(){return B}});i(6699);var s=i(6252),e=i(3577),c=i(9963),o=i(4542);const r=t=>((0,s.dD)("data-v-1e282dcc"),t=t(),(0,s.Cn)(),t),n=r((()=>(0,s._)("div",{class:"top_pic"},[(0,s._)("img",{src:o,alt:"",class:"img-fluid"})],-1))),l={id:"main-products"},d={class:"container-fluid con-products"},p={class:"row justify-content-between"},u={class:"col-2 products-category"},g=r((()=>(0,s._)("span",{class:"point"},null,-1))),h=["onClick"],_={class:"col-12 col-lg-10 products-all"},v={class:"title"},k={key:0},m={key:1},C={class:"products-search"},w={class:"d-flex"},y=r((()=>(0,s._)("i",{class:"bi bi-search"},null,-1))),f=["disabled"],P={class:"products-list"},b={class:"card-pic"},$=["onClick"],D=["onClick"],x=["onClick"],M=["src","alt"],L={class:"card-body"},z=["onClick"],N={class:"card-price"},T={key:0,class:"pagination"},Z=["onClick"],A={class:"page-link",href:"#"};function H(t,a,i,o,r,H){const W=(0,s.up)("VLoading"),Y=(0,s.up)("NavBar");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(W,{active:r.isLoading},null,8,["active"]),(0,s.Wm)(Y),n,(0,s._)("main",l,[(0,s._)("div",d,[(0,s._)("div",p,[(0,s._)("div",u,[(0,s._)("ul",null,[g,(0,s._)("li",{class:(0,e.C_)({active:!r.pagination.category}),onClick:a[0]||(a[0]=t=>H.getProducts())}," 全部商品 ",2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.productCategory,(t=>((0,s.wg)(),(0,s.iD)("li",{class:(0,e.C_)({active:r.pagination.category===t}),key:t,onClick:a=>H.getProducts(1,t)},(0,e.zw)(t),11,h)))),128))])]),(0,s._)("div",_,[(0,s._)("div",v,[0!==r.searchProduct.length?((0,s.wg)(),(0,s.iD)("h3",k,"搜尋結果")):((0,s.wg)(),(0,s.iD)("h3",m,(0,e.zw)(r.pagination.category||"全部商品"),1)),(0,s._)("div",C,[(0,s._)("form",w,[y,(0,s.wy)((0,s._)("input",{class:"form-control me-2",type:"search",placeholder:"Search","onUpdate:modelValue":a[1]||(a[1]=t=>r.search=t)},null,512),[[c.nr,r.search]])]),(0,s._)("button",{class:"btn-search",type:"button",onClick:a[2]||(a[2]=(0,c.iM)(((...t)=>H.searchProducts&&H.searchProducts(...t)),["prevent"])),disabled:!r.search.replace(/\s/g,"")}," 搜尋 ",8,f)])]),(0,s._)("div",P,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.products,(a=>((0,s.wg)(),(0,s.iD)("div",{class:"card",key:a.id},[(0,s._)("div",b,[t.wishProduct.includes(a.id)?((0,s.wg)(),(0,s.iD)("i",{key:0,class:"add_to_wishlist bi bi-heart-fill",onClick:(0,c.iM)((i=>t.addToWish(a.id)),["prevent"])},null,8,$)):((0,s.wg)(),(0,s.iD)("i",{key:1,class:"add_to_wishlist bi bi-heart",onClick:(0,c.iM)((i=>t.addToWish(a.id)),["prevent"])},null,8,D)),(0,s._)("a",{class:"add_to_cart",href:"#",onClick:(0,c.iM)((i=>t.addToCart(a.id)),["prevent"])},"加入購物車",8,x),(0,s._)("img",{src:a.imageUrl,class:"card-img-top",alt:a.title},null,8,M)]),(0,s._)("div",L,[(0,s._)("a",{class:"card-title",href:"#",onClick:(0,c.iM)((t=>H.getProduct(a.id)),["prevent"])},(0,e.zw)(a.title),9,z),(0,s._)("span",N,"NT"+(0,e.zw)(a.price),1)])])))),128))]),0===r.searchProduct.length?((0,s.wg)(),(0,s.iD)("ul",T,[(0,s._)("li",{class:(0,e.C_)(["page-item",{disabled:!r.pagination.has_pre}])},[(0,s._)("a",{class:"page-link",href:"#",onClick:a[3]||(a[3]=(0,c.iM)((t=>H.getProducts(r.pagination.current_page-1,r.pagination.category)),["prevent"]))}," Previous ")],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.pagination.total_pages,((t,a)=>((0,s.wg)(),(0,s.iD)("li",{class:(0,e.C_)(["page-item",{active:t===r.pagination.current_page}]),key:a,onClick:(0,c.iM)((a=>H.getProducts(t,r.pagination.category)),["prevent"])},[(0,s._)("a",A,(0,e.zw)(t),1)],10,Z)))),128)),(0,s._)("li",{class:(0,e.C_)(["page-item",{disabled:!r.pagination.has_next}])},[(0,s._)("a",{class:"page-link",href:"#",onClick:a[4]||(a[4]=(0,c.iM)((t=>H.getProducts(r.pagination.current_page+1,r.pagination.category)),["prevent"]))}," Next ")],2)])):(0,s.kq)("",!0)])])])])],64)}var W=i(902),Y=i(874),K=i(7418),S={name:"ProductsView",data(){return{productsAll:[],products:[],pagination:{},productCategory:[],search:"",searchProduct:[],isLoading:!1}},mixins:[Y.Z,K.Z],components:{NavBar:W.Z},methods:{getProducts(t=1,a){this.searchProduct=[],this.search="";const i="https://vue3-course-api.hexschool.io/v2",s="vue_cu";let e=`${i}/api/${s}/products?page=${t}`;a&&(e=`${i}/api/${s}/products?page=${t}&category=${a}`),this.isLoading=!0,this.$http.get(e).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination,this.isLoading=!1})).catch((t=>{console.dir(t.response.data.message)}))},getProduct(t){this.$router.push(`/product/${t}`)},getCatgory(){const t="https://vue3-course-api.hexschool.io/v2",a="vue_cu",i=`${t}/api/${a}/products/all`;this.$http.get(i).then((t=>{this.productsAll=t.data.products;const a=this.productsAll.map((function(t){return t.category}));this.productCategory=a.filter((function(t,a,i){return i.indexOf(t)===a}))})).catch((t=>{console.dir(t.response.data.message)}))},searchProducts(){this.searchProduct=this.productsAll.filter((t=>t.title.match(this.search.replace(/\s/g,"")))),this.products=this.searchProduct,this.pagination.category=""}},mounted(){this.getProducts(1,this.$route.params.category),this.getCatgory()}},V=i(3744);const q=(0,V.Z)(S,[["render",H],["__scopeId","data-v-1e282dcc"]]);var B=q},4542:function(t,a,i){t.exports=i.p+"img/product_bg.a6d59d33.png"}}]);
//# sourceMappingURL=598.225dd426.js.map