"use strict";(self["webpackChunkweek8_0626"]=self["webpackChunkweek8_0626"]||[]).push([[224],{6852:function(t,a,o){o.r(a),o.d(a,{default:function(){return vt}});var s=o(6252),e=o(3577),n=o(9963),i=o(3299);const c=t=>((0,s.dD)("data-v-0940742f"),t=t(),(0,s.Cn)(),t),l={id:"main-cart"},d={class:"container-fluid con-cart"},r={class:"row justify-content-center"},u=c((()=>(0,s._)("div",{class:"step"},[(0,s._)("div",{class:"step-status step-confirm finish"},[(0,s._)("span",null,"1"),(0,s.Uk)(" 購物車 ")]),(0,s._)("div",{class:"step-status step-fill"},[(0,s._)("span",null,"2"),(0,s.Uk)(" 填寫資料 ")]),(0,s._)("div",{class:"step-status step-finish"},[(0,s._)("span",null,"3"),(0,s.Uk)(" 完成訂單 ")])],-1))),p={class:"con-cart-inner"},_={class:"row"},h={class:"col-12 order-content"},v=c((()=>(0,s._)("h3",null,"購物車內容",-1))),f={key:0,class:"noProduct"},m=c((()=>(0,s._)("img",{src:i,alt:"",class:"img-fluid"},null,-1))),C=[m],b={key:1,class:"order-content-inner"},y=(0,s.uE)('<div class="cart-list-title" data-v-0940742f><div class="data" data-v-0940742f>商品資料</div><div class="unitPrice d-none d-sm-block" data-v-0940742f>單價</div><div class="count d-none d-sm-block" data-v-0940742f>數量</div><div class="totalPrice d-none d-sm-block" data-v-0940742f>小計</div><div class="btn_del d-none d-sm-block" data-v-0940742f>刪除</div></div>',1),k={class:"pic"},g=["src","alt"],w={class:"title"},$={class:"unitPrice"},U={class:"count"},N={class:"input-group"},D=["onClick"],x=c((()=>(0,s._)("button",{class:"btn",type:"button"},"-",-1))),z=[x],P=["value"],q=["onClick"],G=c((()=>(0,s._)("button",{class:"btn",type:"button"},"+",-1))),L=[G],V={class:"totalPrice"},O=c((()=>(0,s._)("span",{class:"d-sm-none"},"小計",-1))),F=["onClick"],B=c((()=>(0,s._)("i",{class:"bi bi-trash"},null,-1))),H=[B],I={class:"col-12 col-md-6 order-tote"},M=c((()=>(0,s._)("h3",null,"選擇送貨及付款方式",-1))),S={class:"order-tote-inner"},W=c((()=>(0,s._)("label",{for:"tote",class:"form-label"},"送貨方式",-1))),Y=c((()=>(0,s._)("option",{value:"宅配"},"宅配 (送貨時間1-2工作日假日除外)",-1))),Z=c((()=>(0,s._)("option",{value:"離島宅配"},"離島宅配 (送貨時間3-4日)",-1))),j=[Y,Z],E=c((()=>(0,s._)("label",{for:"pay",class:"form-label"},"付款方式",-1))),J=c((()=>(0,s._)("option",{value:"貨到付款"},"貨到付款",-1))),K=c((()=>(0,s._)("option",{value:"線上付款"},"線上付款",-1))),A=[J,K],Q={class:"col-12 col-md-6 order-data"},R=c((()=>(0,s._)("h3",null,"訂單資訊",-1))),T={class:"order-data-inner"},X={class:"p-1 sum"},tt=c((()=>(0,s._)("span",null,"小計：",-1))),at={class:"p-1 order-data-fare"},ot={key:0,class:"text-end"},st={class:"p-1 order-data-coupon"},et=c((()=>(0,s._)("div",{class:"pb-1"},"優惠代碼",-1))),nt={class:"input-group"},it={class:"p-1 order-data-amount"},ct=c((()=>(0,s._)("span",null,"合計：",-1))),lt={key:0},dt={key:1};function rt(t,a,o,i,c,m){const x=(0,s.up)("VLoading"),G=(0,s.up)("NavBar");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(x,{active:c.isLoading},null,8,["active"]),(0,s.Wm)(G),(0,s._)("main",l,[(0,s._)("div",d,[(0,s._)("div",r,[u,(0,s._)("div",p,[(0,s._)("div",_,[(0,s._)("div",h,[v,0==c.carts.length?((0,s.wg)(),(0,s.iD)("div",f,C)):((0,s.wg)(),(0,s.iD)("div",b,[y,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.carts,(a=>((0,s.wg)(),(0,s.iD)("div",{class:"cart-list-item",key:a.id},[(0,s._)("div",k,[(0,s._)("img",{src:a.product?.imageUrl,alt:a.product?.title,class:"img-fluid"},null,8,g)]),(0,s._)("div",w,(0,e.zw)(a.product?.title),1),(0,s._)("div",$,(0,e.zw)(t.$currency(a.product?.price)),1),(0,s._)("div",U,[(0,s._)("div",N,[(0,s._)("div",{class:"input-count-prepend",onClick:t=>m.updateCart(a.id,a.qty-1)},z,8,D),(0,s._)("input",{class:"form-control text-center input-count",type:"text",placeholder:"",value:a.qty,disabled:""},null,8,P),(0,s._)("div",{class:"input-count-append",onClick:t=>m.updateCart(a.id,a.qty+1)},L,8,q)])]),(0,s._)("div",V,[O,(0,s.Uk)(" "+(0,e.zw)(t.$currency(a.total)),1)]),(0,s._)("div",{class:"btn_del",onClick:t=>m.delProduct(a.id)},H,8,F)])))),128))]))]),(0,s.wy)((0,s._)("div",I,[M,(0,s._)("div",S,[W,(0,s.wy)((0,s._)("select",{class:"form-select mb-2",id:"tote",required:"","onUpdate:modelValue":a[0]||(a[0]=t=>c.tote=t)},j,512),[[n.bM,c.tote]]),E,(0,s.wy)((0,s._)("select",{class:"form-select",id:"pay",required:"","onUpdate:modelValue":a[1]||(a[1]=t=>c.pay=t)},A,512),[[n.bM,c.pay]])])],512),[[n.F8,0!==c.carts.length]]),(0,s.wy)((0,s._)("div",Q,[R,(0,s._)("div",T,[(0,s._)("div",X,[tt,(0,s._)("span",null,(0,e.zw)(t.$currency(c.final_total)),1)]),(0,s._)("div",at,[(0,s._)("span",null,"運費："+(0,e.zw)(c.final_total>=666?t.$currency(0):t.$currency(60)),1),c.final_total<666?((0,s.wg)(),(0,s.iD)("div",ot," 還差"+(0,e.zw)(t.$currency(666-c.final_total))+"免運 ",1)):(0,s.kq)("",!0)]),(0,s._)("div",st,[et,(0,s._)("div",nt,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[2]||(a[2]=t=>c.couponCode=t),ref:"promoCode"},null,512),[[n.nr,c.couponCode]]),c.couponUse?((0,s.wg)(),(0,s.iD)("button",{key:1,type:"submit",class:"btn btn-secondary",onClick:a[4]||(a[4]=(...t)=>m.removeCouponCode&&m.removeCouponCode(...t))}," 移除 ")):((0,s.wg)(),(0,s.iD)("button",{key:0,type:"submit",class:"btn btn-secondary",onClick:a[3]||(a[3]=(...t)=>m.addCouponCode&&m.addCouponCode(...t))}," 套用 "))]),(0,s.wy)((0,s._)("span",null,"此優惠代碼無效",512),[[n.F8,c.couponNG]])]),(0,s._)("div",it,[ct,c.couponUse?((0,s.wg)(),(0,s.iD)("span",dt,(0,e.zw)(t.$currency(c.final_total_coupon)),1)):((0,s.wg)(),(0,s.iD)("span",lt,(0,e.zw)(c.final_total>=666?t.$currency(c.final_total):`${t.$currency(c.final_total+60)}`),1))]),(0,s._)("button",{type:"button",class:"btn btn-next",onClick:a[5]||(a[5]=(...t)=>m.createOrder&&m.createOrder(...t))}," 前往結帳 ")])],512),[[n.F8,0!==c.carts.length]])])])])])])],64)}var ut=o(902),pt={name:"CartView",data(){return{products:[],carts:[],total:0,final_total:0,final_total_coupon:0,couponCode:"",couponUse:!1,couponNG:!1,fare:0,tote:"宅配",pay:"貨到付款",isLoading:!1}},components:{NavBar:ut.Z},watch:{final_total(){this.final_total<666?this.fare=60:this.fare=0,this.addCouponCode()}},methods:{getCart(){const t="https://vue3-course-api.hexschool.io/v2",a="vue_cu";this.isLoading=!0,this.$http.get(`${t}/api/${a}/cart`).then((t=>{this.carts=t.data.data.carts,this.final_total=t.data.data.final_total,this.total=t.data.data.total,this.isLoading=!1})).catch((t=>{console.dir(t.response.data.message)}))},updateCart(t,a){const o="https://vue3-course-api.hexschool.io/v2",s="vue_cu";a||this.$http.delete(`${o}/api/${s}/cart/${t}`).then((t=>this.getCart())).catch((t=>{console.dir(t.response.data.message)}));const e={product_id:t,qty:a};this.$http.put(`${o}/api/${s}/cart/${t}`,{data:e}).then((t=>{this.getCart(),this.$mitt.emit("update-count")})).catch((t=>{console.dir(t.response.data.message)}))},createOrder(){const t={fare:this.fare,tote:this.tote,pay:this.pay,couponCode:this.couponCode||""};this.$router.push("/checkout"),localStorage.setItem("orderData",JSON.stringify(t))},delProduct(t){const a="https://vue3-course-api.hexschool.io/v2",o="vue_cu";this.$http.delete(`${a}/api/${o}/cart/${t}`).then((t=>{this.getCart(),this.$mitt.emit("update-count")})).catch((t=>{console.dir(t.response.data.message)}))},addCouponCode(){let t=0;switch(this.final_total<666&&(t=60),this.couponCode){case"Ninniku75":this.final_total_coupon=.75*(this.final_total+t),this.couponUse=!0,this.couponNG=!1,this.$refs.promoCode.disabled=!0;break;case"Ninniku85":this.final_total_coupon=.85*(this.final_total+t),this.couponUse=!0,this.couponNG=!1,this.$refs.promoCode.disabled=!0;break;case"Ninniku90":this.final_total_coupon=.9*(this.final_total+t),this.couponUse=!0,this.couponNG=!1,this.$refs.promoCode.disabled=!0;break;case"":this.couponNG=!1;break;default:this.couponNG=!0,this.couponUse=!1;break}},removeCouponCode(){this.couponCode="",this.couponUse=!1,this.$refs.promoCode.disabled=!1}},mounted(){this.getCart()}},_t=o(3744);const ht=(0,_t.Z)(pt,[["render",rt],["__scopeId","data-v-0940742f"]]);var vt=ht},3299:function(t,a,o){t.exports=o.p+"img/noProduct.40010a11.png"}}]);
//# sourceMappingURL=224.c68d2369.js.map